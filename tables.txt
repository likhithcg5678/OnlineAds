CREATE TABLE MainCategory (
    MainCategoryID INT IDENTITY(1,1) PRIMARY KEY,
    CategoryType VARCHAR(50) NOT NULL,
    CategoryName VARCHAR(50) NOT NULL
);


CREATE TABLE SubCategory (
    SubCategoryID INT IDENTITY(1,1) PRIMARY KEY,
    MainCategoryID INT NOT NULL,
    SubCategoryName VARCHAR(50) NOT NULL,
    FOREIGN KEY (MainCategoryID) REFERENCES MainCategory(MainCategoryID) 
        ON UPDATE CASCADE 
        ON DELETE CASCADE
);




CREATE TABLE Users(
    UserID INT IDENTITY(1000,1) PRIMARY KEY,
    FullName VARCHAR(15) NOT NULL,
    DOB DATE NOT NULL,
    Gender VARCHAR(7) NOT NULL,
    EmailID VARCHAR(30) NOT NULL,
    
    City VARCHAR(10) NOT NULL,
    State VARCHAR(15) NOT NULL,
    PhoneNo VARCHAR(10) NOT NULL,
    Password VARCHAR(9) NOT NULL,
    UserType CHAR(1) NOT NULL DEFAULT 'U'
);



CREATE TABLE Ad (
    AdID INT IDENTITY(1,1) PRIMARY KEY,
    UserID INT NOT NULL,
    MainCategoryID INT NOT NULL,
    SubCategoryID INT NOT NULL,
    AdTitle VARCHAR(100) NOT NULL,
    AdDescription TEXT NOT NULL,
    ContactName VARCHAR(50) NOT NULL,
    ContactEmail VARCHAR(30) NOT NULL,
    PhoneNumber VARCHAR(10) NOT NULL,
    Status VARCHAR(20) NOT NULL,
    FOREIGN KEY (UserID) REFERENCES Users(UserID),
    FOREIGN KEY (MainCategoryID) REFERENCES MainCategory(MainCategoryID),
    FOREIGN KEY (SubCategoryID) REFERENCES SubCategory(SubCategoryID)
);



CREATE TABLE Interest (
    InterestID INT IDENTITY(1,1) PRIMARY KEY,
    AdID INT NOT NULL,
    UserID INT NOT NULL,
    InterestMessage TEXT NOT NULL,
    Timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (AdID) REFERENCES Ad(AdID),
    FOREIGN KEY (UserID) REFERENCES Users(UserID)
);



CREATE TABLE AdImages (
    ImageID INT IDENTITY(1,1) PRIMARY KEY,
    AdID INT NOT NULL,
    ImageURL VARCHAR(255) NOT NULL,
    FOREIGN KEY (AdID) REFERENCES Ad(AdID)
        ON UPDATE CASCADE
        ON DELETE CASCADE
);



===================================================================================


office table


CREATE TABLE MainCategory (
    MCid INT IDENTITY(1,1) PRIMARY KEY,
    MCname VARCHAR(50) NOT NULL UNIQUE
);



CREATE TABLE SubCategory (
    SCid INT IDENTITY(1,1) PRIMARY KEY,
    MCid INT NOT NULL,
    SCname VARCHAR(50) NOT NULL UNIQUE,
    FOREIGN KEY (MCid) REFERENCES MainCategory(MCid)
        ON UPDATE CASCADE 
        ON DELETE CASCADE
);



CREATE TABLE Users(
    UserID INT IDENTITY(1000,1) PRIMARY KEY,
    FullName VARCHAR(15) NOT NULL,
    DOB DATE NOT NULL,
    Gender VARCHAR(7) NOT NULL,
    EmailID VARCHAR(30) NOT NULL, 
    City VARCHAR(10) NOT NULL,
    State VARCHAR(15) NOT NULL,
    PhoneNo VARCHAR(10) NOT NULL,
    Password VARCHAR(9) NOT NULL,
    UserType CHAR(1) NOT NULL DEFAULT 'U'
);



CREATE TABLE Ad (
    AdID INT IDENTITY(1,1) PRIMARY KEY,
    UserID INT NOT NULL,
    MCid INT NOT NULL,
    SCid INT  NOT NULL,
    AdTitle VARCHAR(100) NOT NULL,
    AdDescription TEXT NOT NULL,
    ContactName VARCHAR(50) NOT NULL,
    ContactEmail VARCHAR(30) NOT NULL,
    PhoneNumber VARCHAR(10) NOT NULL,
    Status VARCHAR(20) NOT NULL,
    FOREIGN KEY (UserID) REFERENCES Users(UserID),
    FOREIGN KEY (MCid ) REFERENCES MainCategory(MCid ),
    FOREIGN KEY (SCid) REFERENCES SubCategory(SCid)
);



CREATE TABLE Interest (
    InterestID INT IDENTITY(1,1) PRIMARY KEY,
    AdID INT NOT NULL,
    UserID INT NOT NULL,
    InterestMessage TEXT NOT NULL,
    Timestamp DATETIME DEFAULT GETDATE(),
    FOREIGN KEY (AdID) REFERENCES Ad(AdID)
        ON DELETE CASCADE
        ON UPDATE CASCADE,
    FOREIGN KEY (UserID) REFERENCES Users(UserID)
        ON DELETE CASCADE
        ON UPDATE CASCADE
);


CREATE TABLE AdImages (
    ImageID INT IDENTITY(1,1) PRIMARY KEY,
    AdID INT NOT NULL,
    ImageURL VARCHAR(255) NOT NULL,
    FOREIGN KEY (AdID) REFERENCES Ad(AdID)
        ON DELETE CASCADE
);




